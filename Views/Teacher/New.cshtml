@{
    ViewBag.Title = "New";
}
<script>
    window.onload = function () {
    //Required Variables
    var formHandle = document.forms.add_teacher;
    var teacherFname = document.getElementById("TeacherFname");
    var teacherLname = document.getElementById("TeacherLname");
    var employeeNumber = document.getElementById("EmployeeNumber");
    var employeeNumberRegEx = /(T)\d{3}$/;
    var hireDate = document.getElementById("HireDate");
    var salary = document.getElementById("Salary");

    //Listeners
    formHandle.onsubmit = processForm;

    //Functions
    function processForm() {

        // Remove previous validation highlighting
        var allFields = document.querySelectorAll('.form-control');
        allFields.forEach(function (element) {
            element.style.background = ""; // Reset background color
        });
        // Validate fields
        if (teacherFname.value === "") {
            highlightField(teacherFname);
            return false;
        }
        if (teacherLname.value === "") {
            highlightField(teacherLname);
            return false;
        }
        if (employeeNumber.value === "" || !employeeNumberRegEx.test(employeeNumber.value)) {
            highlightField(employeeNumber);
            return false;
        }
        if (hireDate.value === "" || new Date(hireDate.value) > new Date()) {
            highlightField(hireDate);
            return false;
        }
        if (salary.value === "" || salary.value < 0) {
            highlightField(salary);
            return false;
        }
    }
}
</script>
<div id="containershow">
    <nav class="my-3">
        <a class="navlink" href="/Teacher/List">Back To Teachers</a>
    </nav>
    <h2>New Teacher</h2>

    <form method="POST" action="/Teacher/Create/" name="add_teacher">
        <div class="form-group">
            <label for="TeacherFname">First Name:</label>
            <input type="text" class="form-control" id="TeacherFname" name="TeacherFname" placeholder="Enter first name" />
        </div>
        <div class="mt-2 form-group">
            <label for="TeacherLname">Last Name:</label>
            <input type="text" class="form-control" id="TeacherLname" name="TeacherLname" placeholder="Enter last name" />
        </div>
        <div class="mt-2 form-group">
            <label for="EmployeeNumber">Employee Number:</label>
            <input type="text" class="form-control" id="EmployeeNumber" name="EmployeeNumber" placeholder="Enter employee number" />
        </div>
        <div class="mt-2 form-group">
            <label for="HireDate">Hire Date:</label>
            <input type="date" class="form-control" id="HireDate" name="HireDate" value="@DateTime.Now.ToString("yyyy-MM-dd")" />
        </div>
        <div class="mt-2 form-group">
            <label for="Salary">Salary:</label>
            <input type="number" step=".01" class="form-control" id="Salary" name="Salary" placeholder="Enter salary" />
        </div>
        <button type="submit" class="mt-2 btn btn-primary">Add Teacher</button>
    </form>

    @if (!string.IsNullOrEmpty(ViewBag.Message))
    {
        <p>@ViewBag.Message</p>
    }
</div>
